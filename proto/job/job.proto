syntax = "proto3";

package job;

//------------------Job模块------------------------------------------
service JobService {
  // 异步提交job
  rpc AsyncSubmit(stream SubmitRequest) returns (AsyncSubmitResponse);
  // 同步提交job
  rpc SyncSubmit(stream SubmitRequest) returns (SyncSubmitResponse);
}

message SubmitRequest {
  // job名称
  string Name = 1;
  // job类型
  string Type = 2;
  // 插件集合
  repeated string PluginSet = 3;
  // job数据
  string Data = 4;
}

message AsyncSubmitResponse {
  // job ID需要记录
  int64 Id = 1;
}

message SyncSubmitResponse {
  // job ID
  int64 Id = 1;
  // job状态,0:待执行，1：执行中，2：执行完成，3：取消执行，4：系统异常，5：推送失败，6：运行超时，7：业务处理异常
  int32 status = 2;
  // 处理结果
  string Result = 3;
}